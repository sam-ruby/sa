- var intFormatter = new Backgrid.NumberFormatter({decimals: 5})
- var item_width = '' + 80.0/items.length + '%'
.sig-comp-table
  .col-head
    .srow
      .name Signal Name
      each item in items
        .item(style='width:' + item_width)
          if !item.image_url
            .encloser
              a(href='http://www.walmart.com/ip/' + item.item_id, target='_blank')
                if item.title
                  = item.item_title
                else
                  = item.item_id
          else
            .encloser
              a(href='http://www.walmart.com/ip/' + item.item_id, target='_blank')
                img.item-image(src=item.image_url)
                br
                .title= item.title
          table.table.table-condensed
            tr
              td Position
              td
                if item.in_top_16 == 0 && item.position
                  span.label.label-important Recommended
                else if item.position || item.position == 0
                  = item.position 
                else
                 | N/A
            tr
              td Orders
              td
                if item.orders || item.orders == 0
                  = item.orders
                else
                  | N/A
            tr
              td Final Score
              td
                - var fs = 'reranked.final.score'
                - var fs_value = 0
                if item.signals_json && item.signals_json[fs] && item.signals_json[fs].v 
                  - fs_value = parseFloat(item.signals_json[fs].v)
                    = intFormatter.fromRaw(fs_value)
                else
                  | N/A


  .signal-section
    if signals.length > 0
      each signal in signals
        .srow
          .name= signal.name
          each item in items
            - var good_score = false, signal_value, signal_weight, score, classname
            .score.numerical-col(style='width:' + item_width)
              if item.signals_json && item.signals_json[signal.id] && item.signals_json[signal.id].v && item.signals_json[signal.id].w
                - signal_value = parseFloat(item.signals_json[signal.id].v)
                - signal_weight = parseFloat(item.signals_json[signal.id].w)
                - score = intFormatter.fromRaw(signal_value * signal_weight)
                if item.signals_json[signal.id].max
                  i.icon-star &nbsp;
                  - classname = 'green-change-signal'
                else
                  - classname = ''
                
                span
                  a(class=classname, data-toggle='tooltip', data-html=true, data-title='&nbsp;&nbsp;Score: ' + intFormatter.fromRaw(signal_value) + '<br/>Weight: ' + intFormatter.fromRaw(signal_weight), data-placement='left')= score
              else
                - score = '-'
    else
      .srow
        .no-data No Data Available
        
